{"version":3,"sources":["pages/MoviePage.js","pages/pages.module.css"],"names":["LazyCast","lazy","LazyReviews","getContentType","value","MoviePage","state","data","contentType","props","location","from","prevLocation","handleClick","history","push","match","this","axios","get","process","params","id","setState","className","styles","detailsPage","onClick","backBtn","poster","src","poster_path","alt","title","detailsInfo","name","Math","round","vote_average","overview","genres","map","item","key","to","pathname","fallback","path","component","birthTime","Date","parse","birthday","birthFullDate","month","getMonth","date","getDate","year","getFullYear","age","floor","now","deathYear","deathday","profile_path","detailsPara","biography","Component","module","exports"],"mappings":"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","file":"static/js/movie-page.2031ffd9.chunk.js","sourcesContent":["import React, { Component, Suspense, lazy } from \"react\";\r\nimport { Link, Route, Switch } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Spinner from \"../components/spinner/Spinner\";\r\nimport styles from \"./pages.module.css\";\r\n\r\nconst LazyCast = lazy(() =>\r\n  import(/* webpackChunkName: \"cast-page\" */ \"./Cast\" )\r\n);\r\n\r\nconst LazyReviews = lazy(() =>\r\n  import(/* webpackChunkName: \"reviews-page\" */ \"./Reviews\" )\r\n);\r\n\r\nconst getContentType = value => {\r\n  return value ? value : \"movie\";\r\n};\r\n\r\nclass MoviePage extends Component {\r\n  state = {\r\n    data: [],\r\n    contentType: getContentType(this.props.location.state.from.contentType),\r\n    prevLocation: \"\"\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const { match } = this.props;\r\n    const { contentType } = this.state;\r\n    const data = await axios.get(\r\n      `${process.env.REACT_APP_BASE_URL}${contentType}/${match.params.id}?api_key=${process.env.REACT_APP_API_KEY}`\r\n    );\r\n    this.setState({\r\n      data: data.data,\r\n      prevLocation: this.props.location.state.from\r\n    });\r\n  }\r\n\r\n  handleClick = () => {\r\n    const { prevLocation } = this.state;\r\n    const { history } = this.props;\r\n    if (prevLocation) {\r\n      history.push(prevLocation);\r\n    } else {\r\n      history.push(\"/\");\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { data, contentType } = this.state;\r\n    if (contentType !== \"person\") {\r\n      return (\r\n        <div>\r\n          <div className={styles.detailsPage}>\r\n            <div>\r\n              <button onClick={this.handleClick} className={styles.backBtn}>\r\n                Go Back\r\n              </button>\r\n              <img\r\n                className={styles.poster}\r\n                src={`https://image.tmdb.org/t/p/w500${data.poster_path}`}\r\n                alt={data.title}\r\n              />\r\n            </div>\r\n            <div className={styles.detailsInfo}>\r\n              <h3>{data.title || data.name}</h3>\r\n              <p>User score: {Math.round(data.vote_average * 10)}%</p>\r\n              <h4>Overview</h4>\r\n              <p>{data.overview}</p>\r\n              <h4>Genres</h4>\r\n              {data.genres &&\r\n                data.genres.map(item => (\r\n                  <span key={item.id}>{item.name} </span>\r\n                ))}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <p>Additional Information</p>\r\n            <ul>\r\n              <li>\r\n                <Link\r\n                  to={{\r\n                    pathname: `/${contentType}/${data.id}/cast`,\r\n                    state: contentType\r\n                  }}\r\n                >\r\n                  Cast\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link\r\n                  to={{\r\n                    pathname: `/${contentType}/${data.id}/reviews`,\r\n                    state: contentType\r\n                  }}\r\n                >\r\n                  Reviews\r\n                </Link>\r\n              </li>\r\n            </ul>\r\n            <Suspense fallback={<Spinner />}>\r\n              <Switch>\r\n                <Route path={`/${contentType}/:id/cast`} component={LazyCast} />\r\n                <Route\r\n                  path={`/${contentType}/:id/reviews`}\r\n                  component={LazyReviews}\r\n                />\r\n              </Switch>\r\n            </Suspense>\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      const birthTime = Date.parse(data.birthday);\r\n      const birthFullDate = new Date(birthTime);\r\n      const month = birthFullDate.getMonth();\r\n      const date = birthFullDate.getDate();\r\n      const year = birthFullDate.getFullYear();\r\n      const monthNames = [\r\n        \"January\",\r\n        \"February\",\r\n        \"March\",\r\n        \"April\",\r\n        \"May\",\r\n        \"June\",\r\n        \"July\",\r\n        \"August\",\r\n        \"September\",\r\n        \"October\",\r\n        \"November\",\r\n        \"December\"\r\n      ];\r\n      const age = Math.floor((Date.now() - birthTime) / 31536000000);\r\n      const deathYear = new Date(Date.parse(data.deathday)).getFullYear();\r\n      return (\r\n        <>\r\n          <div className={styles.detailsPage}>\r\n            <div>\r\n              <button onClick={this.handleClick} className={styles.backBtn}>\r\n                Go Back\r\n              </button>\r\n              <img\r\n                className={styles.poster}\r\n                src={`https://image.tmdb.org/t/p/w500${data.profile_path}`}\r\n                alt={data.title}\r\n              />\r\n            </div>\r\n            <div className={styles.detailsInfo}>\r\n              <h3>{data.name}</h3>\r\n              <p>\r\n                <b>Born:</b> {monthNames[month]} {date}, {year}{\" \"}\r\n                {deathYear ? (\r\n                  <span>- {deathYear}</span>\r\n                ) : (\r\n                  <span>({age} years)</span>\r\n                )}\r\n              </p>\r\n              <p className={styles.detailsPara}>{data.biography}</p>\r\n            </div>\r\n          </div>\r\n        </>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default MoviePage;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detailsPage\":\"pages_detailsPage__1Kiez\",\"poster\":\"pages_poster__19F6_\",\"detailsInfo\":\"pages_detailsInfo__1BsI0\",\"actorImage\":\"pages_actorImage__IkICT\",\"actorList\":\"pages_actorList__3UJ2C\",\"actorListItem\":\"pages_actorListItem__3lj_y\",\"detailsPara\":\"pages_detailsPara__1z6Cy\",\"backBtn\":\"pages_backBtn__1mNqC\"};"],"sourceRoot":""}